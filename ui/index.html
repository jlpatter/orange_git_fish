<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Oxidized Git</title>

    <script type="module">
        import "bootstrap/dist/css/bootstrap.min.css";
        import "@fortawesome/fontawesome-free/js/all.min.js";
        import "highlight.js/styles/agate.css";
        import "./mainStyle.css";
        import "./treeView.css";
    </script>
    <script type="module" src="./main.js"></script>
    <script type="module">import "bootstrap/dist/js/bootstrap.min.js";</script>
</head>
<body id="mainBody" class="bg-dark text-white">
    <div class="display-flex-column full-height">
        <div class="display-flex-row">
            <div>
                <button id="fetchBtn" type="button" class="btn btn-secondary btn-sm"><i class="fa-solid fa-arrow-down"></i> Fetch</button>
                <button id="pullBtn" type="button" class="btn btn-primary btn-sm"><i class="fa-solid fa-arrow-down"></i> Pull</button>
                <button id="openPushModalBtn" type="button" class="btn btn-primary btn-sm"><i class="fa-solid fa-arrow-up"></i> Push</button>
                <button id="openBranchModalBtn" type="button" class="btn btn-primary btn-sm"><i class="fa-solid fa-code-branch"></i> Branch</button>
            </div>
            <div id="spinnerContainer">
                <div id="mainSpinner" class="spinner-border text-light" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>

        <div class="flex-auto-in-column display-flex-row">
            <div class="resizable-column full-height">
                <div class="overflow-auto full-height">
                    <ul id="branchesTreeView" class="tree-view">
                        <li><span class="parent-tree"><i class="fa-solid fa-caret-down rotated-caret"></i> Local Branches</span>
                            <ul id="localBranches" class="nested sub-tree-view active-tree"></ul>
                        </li>
                        <li><span class="parent-tree"><i class="fa-solid fa-caret-down"></i> Remote Branches</span>
                            <ul id="remoteBranches" class="nested sub-tree-view"></ul>
                        </li>
                        <li><span class="parent-tree"><i class="fa-solid fa-caret-down"></i> Tags</span>
                            <ul id="tags" class="nested sub-tree-view"></ul>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="flex-auto-in-row display-flex-column">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <button class="nav-link tab-btn-xsm active" id="commits-tab" data-bs-toggle="tab" data-bs-target="#commits" type="button" role="tab" aria-controls="commits" aria-selected="true">Commit Tree</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link tab-btn-xsm" id="changes-tab" data-bs-toggle="tab" data-bs-target="#changes" type="button" role="tab" aria-controls="changes" aria-selected="true">Changes</button>
                    </li>
                </ul>

                <div class="tab-content flex-auto-in-column">
                    <div class="tab-pane fade show active full-height" id="commits" role="tabpanel" aria-labelledby="commits-tab">
                        <div class="overflow-hidden full-height display-flex-column">
                            <div class="resizable-row resizable-row-graph half-height full-width">
                                <div class="full-height display-flex-column">
                                    <h4>Commits</h4>
                                    <div id="commitColumn" class="flex-auto-in-column overflow-auto">
                                        <svg id="commitTableSVG" width="0" height="0"></svg>
                                    </div>
                                </div>
                            </div>
                            <div class="flex-auto-in-column display-flex-column">
                                <ul class="nav nav-tabs overflow-hidden flex-nowrap">
                                    <li class="nav-item">
                                        <button class="nav-link tab-btn-xsm white-space-nowrap active" id="commit-info-tab" data-bs-toggle="tab" data-bs-target="#commit-info" type="button" role="tab" aria-controls="commit-info" aria-selected="true">Info</button>
                                    </li>
                                    <li class="nav-item">
                                        <button class="nav-link tab-btn-xsm white-space-nowrap" id="commit-diff-tab" data-bs-toggle="tab" data-bs-target="#commit-diff" type="button" role="tab" aria-controls="commit-diff" aria-selected="true">File Changes</button>
                                    </li>
                                    <li class="nav-item little-padding-left">
                                        <p id="commitWindowInfo" class="full-height display-flex-column white-space-nowrap"></p>
                                    </li>
                                </ul>

                                <div class="tab-content flex-auto-in-column">
                                    <div class="tab-pane fade show active full-height" id="commit-info" role="tabpanel" aria-labelledby="commit-info-tab"></div>
                                    <div class="tab-pane fade full-height" id="commit-diff" role="tabpanel" aria-labelledby="commit-diff-tab">
                                        <div class="full-height display-flex-column">
                                            <div class="flex-auto-in-column display-flex-row">
                                                <div class="resizable-column resizable-column-file-paths full-height little-padding-left little-padding-top">
                                                    <div id="commitChanges" class="full-height overflow-auto"></div>
                                                </div>
                                                <div class="flex-auto-in-row full-height overflow-auto little-padding-top little-padding-left">
                                                    <table id="commitFileDiffTable"></table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade full-height" id="changes" role="tabpanel" aria-labelledby="changes-tab">
                        <div class="full-height display-flex-column">
                            <div class="flex-auto-in-column display-flex-row">
                                <div class="resizable-column resizable-column-file-paths full-height little-padding-left little-padding-top">
                                    <div class="overflow-hidden display-flex-column full-height">
                                        <div class="resizable-row half-height full-width">
                                            <div class="display-flex-column full-height">
                                                <h5>Unstaged Changes</h5>
                                                <div id="unstagedChanges" class="flex-auto-in-column overflow-auto"></div>
                                            </div>
                                        </div>
                                        <div class="flex-auto-in-column display-flex-column">
                                            <h5>Staged Changes</h5>
                                            <div id="stagedChanges" class="flex-auto-in-column overflow-auto"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-auto-in-row full-height overflow-auto little-padding-top little-padding-left">
                                    <table id="fileDiffTable"></table>
                                </div>
                            </div>
                            <div id="commitControls" class="controls">
                                <input id="summaryTxt" type="text" class="form-control bg-dark text-white" placeholder="Summary">
                                <textarea id="messageTxt" class="bg-dark text-white" rows="3" placeholder="Message"></textarea>
                                <span class="right">
                                    <button id="commitBtn" class="btn btn-primary" type="button">
                                        <i class="fa-regular fa-circle-check"></i> Commit
                                    </button>
                                </span>
                                <span class="right-padding">
                                    <button id="commitPushBtn" class="btn btn-primary" type="button">
                                        <i class="fa-solid fa-arrow-up"></i> Commit & Push
                                    </button>
                                </span>
                            </div>
                            <div id="mergeControls" class="controls">
                                <span class="right">
                                    <button id="continueMergeBtn" class="btn btn-success btn-sm" type="button">Continue Merge</button>
                                </span>
                                <span class="right-padding">
                                    <button id="abortMergeBtn" class="btn btn-danger btn-sm" type="button">Abort Merge</button>
                                </span>
                            </div>
                            <div id="cherrypickControls" class="controls">
                                <span class="right">
                                    <button id="continueCherrypickBtn" class="btn btn-success btn-sm" type="button">Continue Cherrypick</button>
                                </span>
                                <span class="right-padding">
                                    <button id="abortCherrypickBtn" class="btn btn-danger btn-sm" type="button">Abort Cherrypick</button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--    Invisible Stuff Starts Here-->

        <div class="modal fade text-black" id="preferencesModal" tabindex="-1" aria-labelledby="preferencesModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="preferencesModalLabel">Preferences</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <h6>WARNING: Disabling commit limit may reduce performance</h6>
                        <input class="form-check-input" type="checkbox" value="" id="limitCommitsCheckBox" checked><label class="form-check-label" for="limitCommitsCheckBox"> Limit Number of Commits</label>
                        <div><label for="commitCountNumber">Commit Count: </label><input type="number" step="1" class="form-control" id="commitCountNumber"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                        <button id="savePreferencesBtn" type="button" class="btn btn-success btn-sm">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade text-black" id="credentialsModal" tabindex="-1" aria-labelledby="credentialsModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="credentialsModalLabel">Set Credentials</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <h6>Note: If you already have credentials stored in the keychain, this will overwrite them.</h6>
                        <label for="usernameTxt">Username: </label><input type="text" class="form-control" id="usernameTxt">
                        <label for="passwordTxt">Password: </label><input type="password" class="form-control" id="passwordTxt">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                        <button id="saveCredentialsBtn" type="button" class="btn btn-success btn-sm">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade text-black" id="pushModal" tabindex="-1" aria-labelledby="pushModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="pushModalLabel">Push Options</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <select id="remoteSelect" class="form-select" aria-label="Remote Select">
                            <option selected>No Remotes Detected!</option>
                        </select>
                        <input class="form-check-input" type="checkbox" value="" id="forcePushCheckBox"><label class="form-check-label" for="forcePushCheckBox"> Force Push</label>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                        <button id="pushBtn" type="button" class="btn btn-primary btn-sm">Push</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade text-black" id="branchModal" tabindex="-1" aria-labelledby="branchModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="branchModalLabel">Create Branch</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <label for="branchTxt">Branch Name</label><input id="branchTxt" type="text" class="form-control">
                        <input class="form-check-input" type="checkbox" value="" id="branchCheckoutCheckBox"><label class="form-check-label" for="branchCheckoutCheckBox"> Checkout After Create</label>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                        <button id="branchBtn" type="button" class="btn btn-primary btn-sm">Create Branch</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="contextMenu" class="bg-dark gy-0 rounded-0">
            <button type="button" class="btn btn-outline-light rounded-0 btn-sm" onclick="alert('BLURG');">
                ERROR! Do not click!
            </button>
        </div>
    </div>
</body>
</html>
